@model WorkTaskGetVM

<div class="row" style="margin-top:90px">
    <div class="col-sm-12 col-md-6">
        <h1 style="margin-bottom:50px;">@Model.Title</h1>
        <h5>Author:</h5>
        <p>@Model.Author</p>
        <h5>Status:</h5>
        <p>@Model.Status.Name</p>
        <h5>Created date:</h5>
        <p>@Model.CreatedDateTimeUTC</p>
        <h5>Closed date:</h5>
        <p>@Model.ClosedDateTimeUTC</p>
        <h5>Planned date:</h5>
        <p>@Model.PlannedDateTimeUTC</p>
        <h5>Facted work hours:</h5>
        <p>@Model.FactedTimeSpan</p>
        <h5>Description:</h5>
        <p>@Model.Description</p>
        @if (User?.Identity?.Name == Model.Author)
        {
            <div style="display: flex; flex-direction: row">
                <button style="margin-right:20px;" type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#updateModal"
                    hx-get="/task/update/@Model.Id" hx-swap="innerHTML" hx-target="#update-task-content">Update
                </button>
                <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal">Delete</button>
            </div>
        }
    </div>
    <div class="col-sm-12 col-md-6">

    </div>
</div>


<!-- Update Modal -->
<div class="modal fade" id="updateModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Update task</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div id="update-task-content" class="modal-body">
            </div>
            <div class="modal-footer">
                <button asp-controller="task" asp-action="update"
                        type="submit" form="update-task-form" class="btn btn-primary">
                    Update
                </button>
            </div>
        </div>
    </div>
</div>


<!-- Delete Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Delete task</h1>
                <button type="submit" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div id="create-task-content" class="modal-body">
                <p>Are you sure that you want to delete the task?</p>
            </div>
            <div class="modal-footer">
                <a asp-controller="task" asp-action="delete" asp-route-id="@Model.Id" class="btn btn-danger">Delete</a>
            </div>
        </div>
    </div>
</div>


@section Scripts {
    <script>
        document.addEventListener("load", function () {
            var modals = document.querySelectorAll("div.modal");
            modals.forEach(function (modal) {
                modal.classList.remove("show");
            });
        });
    </script>
}
